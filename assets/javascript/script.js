let wordArray = [
    {
        word: "ainbheart",
        grammar: "baininscneach - tríú díchlaonadh",
        definition: "droichghníomh, olc",
        examples: ["Dá mhéid ar ghaibh sé tríd agus do deineadh mícheart air ní dheárna sé ainbheart riamh: beart nó gníomh olc.",
        "Cad eile é ach ainbheart luighe trom ar bhochtaibh? gníomh olc.",
        "Go maithidh Dia dho is iomdha ainbheart do rinne sé ag scriosadh na ndaoine as a mbailtibh: olca gránda."]
    },
    {
        word: "aithdheinim",
        grammar: "briathar a.",
        definition: "deinim airís, cuirim athchlódh air, aitheagar, iompuighim in athchuma, mar éadach, móin, féar",
        examples: ["Leag an ghaoth na stiocaidhe ach d’aithdheineas iad leis an ngealaigh: chuireas ’na seasamh fé sholas na gealaighe.", "An uile lá cuireann sé geall ar chapallaibh agus cailleann, ach ní thréigfeadh a mhian, ní aithdhéanfadh (aitéanfadh an fhoghraidheacht) an saoghal mór: ní atharróchadh faic a aigne.", "Bean bhaileach, ghasta a aithdheineas éadaighe dá chlainn seadh í: iompuigheann sí baill éadaigh lé duine aca agus deineann balcais mhaith dhe do dhuine is lugha dhíobh.", "Chaith an gabha an chrúdh do chur ’on teine bhí sí róchumhang, agus d’aithdhein sé oireamhnach í: dhein sé airís í i slighe go raibh sí mór a dóthain.", "Deineann sé agus aithdheineann sé an dán do léigheamh go dtí go mbíonn sé de ghlanmheabhair aige: léigheann go minic, minic é.", "Ná h-aithdhein do lámh do chur ar an iarann te nó is tinn duit: ná dein airís é.", "Bhuailis cheana me, aithdhein é, feicim: buail an athuair mé.", "Ní h-iontaoibh fear aithdhéanta: fear a iompuigheas ar fheabhas ó dhroichchleachtaibh.", "Tigh aithdhéanta: tigh atharruighthe ar fheabhas.", "Scaipeadh sinn don gcéad ionnsaidhe ón namhaid ach d’aithdheineamair agus ruagamair iad: thángamair i bhfóireamh a chéile airís.."]
    },
    {
        word: "aithne",
        grammar: "baininscneach 4ú díchlaonadh",
        definition: "coidreamh, fios nó eólas pearsanta",
        examples: ["Níl aon aithne agam ar an gcailín sin: níl a fhios agam cé h-í: ní fhéadfainn innsint duit cad is ainm di ná aon rud mar gheall uirthe.", "Chuireas aithne ar Thomás Ó Cléirigh n-a shiopa féin i Sráid an Pheárnéalaigh: choidrigheas é, cuireadh i bhfios dom cér bhé féin, a ainm agus mar sin de.", "Ní bhfaighinn ar m’aithne fear chómh galánta: ar líon na ndaoine go léir gur fios dom cé h-iad.", "Is maith an aithne, ní fuláir, atá agat in Áth Cliath tréis na mbliadhanta go léir atá caithte agat ann: a fhios agat cé h-iad mórán daoine, agus fios nó eólas cár cheart duit gabháil innte.", "Tréis na cinneamhna chaith sé an oidhche san ósbuidéal gan aithne: dall ar cad a bhí n-a aigne féin agus ar an uile rud n-a thímcheall.", "Trí lá thug sé gan aithne gan úrlabhra: gan bheith in inmhe aon rud do thabhairt fé ndeara ná focal cainnte do chur as.", "Tháinig sé isteach an doras mar bheadh an nimh ar an aithne agus sinn ag cainnt air: ar an uain go raibh sé in ár smaointibh.", "Mar bheadh an nimh ar an aithne rith sé im aigne dul fé n-a bhrághaid aguscad bheadh ná é marbh rómham ar an mbóthar: cómhacht éigin draoidheachta ag suathadh m’aigne.", "Aithne na féile agus na carthanachta a bhí agamsa air: sin mar chonnac é, fial, carthanach.", "Dob fhada fairsing aithne air: bhí a fhios ges na sluaightibh air i gcómhgar ’si gcéin.", "Dá mb’í aithne an bhitheamhnaigh do bheadh air ní fhéadfá gan cion do bheith agat air: teist, cáil bitheamhnaigh.", "Ná bíodh muinghin agat as dhuine gan aithne: duine nách mbeadh eólas agat cad é an saghas é.", "“An bhfuil aithne agam air?” “Tá, aithne thar na seacht n-aitheanntaibh”: aithne shármhaith agus le fada.", "Cuireadh ó aithne na h-áite me: coisceadh orm teacht ann.", "D’imthigh an oiread aimsire agus gur imthigheamair as aithne a chéile: gur dhearmhadamair aon rud ag baint linn a bhéarfadh chun ár gcuimhnte a chéile.", "D’ól sé an oiread san ná raibh aithne a bheart aige ag dul amugha a’s ag tabhairt dhá thaobh an bhóthair isteach: ní raibh aon mhotháilt aigne aige ar aon nidh a bhí dhá dhéanamh aige.", "Dá mbeadh aithne agat air leigfeá dho: dá mbeadh a fhios agat cad é an saghas (olc) atá ann.", "Cuir in aithne dá chéile me féin agus an cailín áluinn sin, led thoil: innis dom cé h-í agus innis di cé mé.", "Shaoileas go raibh seanaithne agam air, ach bhí dearmhad orm, ní chuirfinn ó m’aithne air, n-a leith go ndiúltóchadh sé aonne ar shuarachas: aithne an-mhaith.", "Dá mbeadh t’aithne agam thabharfainn mo rún duit: dá mbeadh oiread feasa agam id thaobh a’s go dtuigfí dhom go rabhais iontaobha.", "Duine cúthail nárbh fhuraiste aithne do chur air dob eadh Árt Ó Gríobhtha: a choidreamh do dhéanamh, a mheón do nochtadh.", "“Sagart gan sainnt, ní bhfaighinn ar m’aithne”: ameasc sagart mo choidrimh.", "Aithne gan choidreamh atá agat orm: is eól duit m’ainm ach ní h-eól duit mo mheón ná mo shlighte.", "Lé faid m’aimsire as an bparóiste téidheann sibh dem aithne: ní fheadar cé sibh féin."]
    },
    {
        word: "athnasc",
        grammar: "firinscneach, an chéad díchlaonadh",
        definition: "aithris, cur iarraidh ar, aithris cainnte duine d’fhonn bheith deimhnightheach di; aithris fhonmhóideach",
        examples: ["Ní dóigh liom gur chualais i gceart cad dubhairt sé, déin an chainnt d’athnasc air d’fhéachaint ar thugais leat i gceart í: aithris na focail do tuigeadh duit adubhairt sé.", "Cómhairle! ní théidheann lag orm ach ag athnasc air breis chéille do bheith aige: ag impidhe ’sag iarraidh go láidir.", "Go mbínn cortha bhínn ghá athnasc ar mo chlainn fanacht ó dhrochchuideachtain nó gur thinn dóibh: ghá athchuinghe ortha óm chroidhe.", "Comá ná tiocfadh olc ar an nduine bocht tutbhéalach nuair chonnaic sé ag athnasc air tu: ag aithris go fonmhóideach."]
    },
    {
        word: "bruachán",
        grammar: "firinscneach - an chéad díchlaonadh",
        definition: "teallaire, duine droichbhéasach; duine ná tugann aire dá ghnóth féin",
        examples: ["Scaoil thart an bruachán san – ná cuir aon eadh n-a dhrochchainnt: duine atá ag cainnt thar ceart lé neamhbhéas.", "Dá mbeinn im bhruachán mar thusa, déarfainn leis seasamh dúinn: duine neamhbhéasach.", "Tá sé ag imtheacht n-a bhruachán ar fuaid na tíre, lá aige ar thaobh Fianna Fáil, lá ar thaobh na nGaedheal, agus lá eile ar thaobh Fine Gaedheal: gan fuaimeant, ag itheadh a’s ag gearradh ar gach aonne."]
    },
    {
        word: "buaile",
        grammar: "firinscneach - ceathrú díchlaonadh",
        definition: "log bó nó crúidhte; an clós n-a mbíonn aoileach; cródh nó gabhan",
        examples: ["Téidhidh amach ar an mbuaile lé chéile, tugaid náire dhóibh féin os chómhair na gcomharsan: bíd ag troid ’sag achrann lé chéile go poiblidhe: ar an mbán lé chéile.", "Is dána é coileach ar a bhuaile féin: cois baile is dána duine.", "Caitheadh ’on bhuaile me!: nuair ná raibh aon ghnóth ná aon mheas orm is beag cneastacht fuaireas ó lucht an tighe.", "Tá an fheóil sin lobhtha, gan aon mhaith, caith ’on bhuaile í: caith uait í."]
    },
    {
        word: "camchos",
        grammar: "firinscneach - ceathrú díchlaonadh",
        definition: "cos agus cor innte",
        examples: ["Tairng chughat as mo shlighe do chamachosa: cosa (nách mbeadh cam) bheadh ag teacht treasna agat ar dhuine eile.", "“Léan id chamachosa!”: deirtear lé duine a shatlóchadh ort, a shiubhalóchadh ar rud shoibhriste nó mar sin."]
    },
    {
        word: "cnádánaidhe",
        grammar: "firinscneach - ceathrú díchlaonadh",
        definition: "duine a bhíos ag gearán, cúis nó gan chúis, a bhíos míoshásta, is cuma cad é an aiste do bheadh air",
        examples: ["Léan air, an rud sprionnlaithe, an cnádánaidhe, má chaith sé coróin ar a cháirde, nách air atá an tinneas ’n-a thaobh: an duine beagchroidheach, crádhinntineach."]
    },
    {
        word: "deimhnightheach",
        grammar: "aidiacht",
        definition: "cinnte, dearbhtha",
        examples: ["Dá me thu ní bheinn chómh deimhnightheach díom féin agus go n-éirigheadh liom i gcomhnaidhe: suidhte im aigne: daingean: “talamh slán” do dhéanamh.", "Níl neach deimhnightheach de rud ar bith sa tsaoghal so: níl sé i gcumas a réamhinnsint cad thárlóchaidh i ndeireadh dála.", "“Gheobhair ullmhughadh breágh, slachtmhar”, ars an mháthair leis an leanbh crosta, “agus bí deimhnightheach de”: ná bíodh aon amhras n-a thaobh ort.", "Budh mhór é ár ndíombáidh nuair fuaireamair an toileán gan biadh ná uisce, mar níor dheimhnighthighe sinn ar éirghe gréine ’ná go mbeadh san i bhflúirse ann: níor lugha amhras sinn: suidhte, meáidhte ’n-ár gceann go mbeidís ann.", "Táimid deimhnightheach d’aon nidh amháin ar an saoghal so, an bás: fírinne nách féidir do chur ar neamhnidh.", "Cuireadh teachtaire deimhnightheach chun scéala cruinn do bhreith go ceann spric: teachtaire iontaobha: teachtaire gur b’fhéidir muinghin do bheith as.", "Bain glór as an airgead san, ní dóigh liom gur réal deimhnightheach é: ceann déanta den mhianach cheart.", "Seachain an roth san, níl sí ró-dheimhnightheach: roth seadh í ná beidhfeá sásta it aigne ná go gclisfeadh sí ort.", "Cómhartha deimhnightheach talmhan seadh uisce (sáile) éadoimhin: cómhartha gur féidir seasamh air."]
    },
];

function cardClick(){
	let cards = document.querySelectorAll('#item')
	cards.forEach(card=>{
		card.onclick=function(event){
			
			event.stopPropagation()
			console.log('ok')
			this.classList.toggle('item')
			this.classList.toggle('item_hover')
		}
	})
}

function wordGenerator(array){
	let container = document.querySelector('#wordContainer')
	container.innerHTML = ''
	array.forEach((item,mainKey)=>{
		let htmlString = "";

		htmlString += `<h1 id='word${mainKey}'>` + item.word + "</h1>";
		htmlString += `<button class='show'>+</button>`;
		htmlString += "<p>" + item.grammar + "</p>";
		let lih=''
		let liArray = item.definition.split(';')
		liArray.forEach(i=>{
			lih+=`<p>- ${i}</p>`
		})
		htmlString += `<h3 id='definition${mainKey}'>` + lih + "</h3>";
		let li=''
		item.examples.forEach(example=>{
			if(example.split(':').length<2){
				let [sample,explanation] = example.split('?')
				sample+='? '
				li+=`<li><span>`+sample+'</span><strong><span>'+explanation+'</span></strong></li>'
			}else{
				let [sample,explanation] = example.split(':')
				sample+=': '
				li+=`<li><span>`+sample+'</span><strong><span>'+explanation+'</span></strong></li>'
			}
		})
		htmlString += `<ul id='ul${mainKey}'>${li}</ul>`;
		htmlString+= `<button class="button" id='btn_${mainKey}'>Fill ar an litriú bunaidh</button>`
		htmlString = '<div class="item">'+htmlString+'</div>'
		container.innerHTML += htmlString;
	})
	document.querySelectorAll('.show').forEach(btn=>{
		btn.onclick=function(){
			if(this.innerText=='+'){
				this.innerText='x'
			}else{
				this.innerText='+'
			}
			this.parentNode.classList.toggle('item')
			this.parentNode.classList.toggle('item_hover')
		}
	})
}
wordGenerator(wordArray)
function restoreBtns(arr){
	document.querySelectorAll('button[id^="btn_"]').forEach(btn=>{
		btn.onclick = function(){
			let id = this.id.split('_')[1]
			let word = document.querySelector('#word'+id)
			word.innerHTML = arr[id].word
			word.style.color= 'black';
			let definition = document.querySelector('#definition'+id)
			let lih=''
			let liArray = arr[id].definition.split(';')
			liArray.forEach(i=>{
				lih+=`<p>- ${i}</p>`
			})
			definition.innerHTML = `<h3 id='definition${id}'>` + lih + "</h3>";
			definition.style.color= 'black';
			let li=''
			arr[id].examples.forEach(example=>{
				if(example.split(':').length<2){
					let [sample,explanation] = example.split('?')
					sample+='? '
					li+=`<li><span>`+sample+'</span><strong><span>'+explanation+'</span></strong></li>'
				}else{
					let [sample,explanation] = example.split(':')
					sample+=': '
					li+=`<li><span>`+sample+'</span><strong><span>'+explanation+'</span></strong></li>'
				}
				
			})
			document.querySelector('#ul'+id).innerHTML = li
			let lis = document.querySelectorAll('li')
			makeLiClickable(lis)
		}
	})
}
restoreBtns(wordArray)

let elements = document.querySelectorAll('#wordContainer h3,#wordContainer h1')
function makeElemetsClickable(elem){
	elem.forEach(i=>
		i.addEventListener('click',function(){
			let value = this.innerText
			let cur = this
			console.log(value)
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {

					let res = JSON.parse(this.responseText);

					let signs = [':',',','.','!','?']
					let innerText = res.reduce((text,i)=>{
						if(signs.includes(i[1])){
							text += i[1]+' '
						}else{
							text += ' '+i[1]
						}
						return text
					},'')
					// innerText.replace('\\n','<br>')\
					cur.innerHTML = innerText.replace(/\\n/g,'<br>')
					cur.style.color = 'green'
				}
			};
			xhttp.open("POST", "https://cadhan.com/api/intergaelic/3.0", true);
			xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			xhttp.setRequestHeader("Accept","application/json");
			xhttp.send("teacs="+encodeURIComponent(value)+"&foinse=ga");
		})
	)
}
makeElemetsClickable(elements)

let li = document.querySelectorAll('#wordContainer li')
function makeLiClickable(li){
	li.forEach(i=>
			i.onclick = function(){
				let value = this.innerText
				let cur = this
				var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {

					let res = JSON.parse(this.responseText);
					let signs = [':',',','.','!','?']
					let innerText = res.reduce((text,i)=>{
						if(signs.includes(i[1])){
							text += i[1]+' '
						}else{
							text += ' '+i[1]
						}
						return text
					},'')
					if(innerText.split(':').length<2){
						let [sample,explanation] = innerText.split('?')
						sample+='? ';
						cur.innerHTML='<span>'+sample+'</span><strong><span>'+explanation.replace('\\n','')+'</span>'
					}else{
						let [sample,explanation] = innerText.split(':')
						sample+=': '
						cur.innerHTML='<span>'+sample+'</span><strong><span>'+explanation.replace('\\n','')+'</span>'
						console.log(explanation)
					}

					cur.style.color = 'green'
				}
			};
		xhttp.open("POST", "https://cadhan.com/api/intergaelic/3.0", true);
		xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
		xhttp.setRequestHeader("Accept","application/json");
		xhttp.send("teacs="+encodeURIComponent(value)+"&foinse=ga");
		}
	)
}
makeLiClickable(li)
